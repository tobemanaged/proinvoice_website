name: production deployment
on:
    push:
        branches:
            - main

jobs:
    web-deploy:
        name: Deploy to Production Server
        runs-on: ubuntu-latest
        environment: production
        permissions:
            contents: read
        steps:
            - name: Get latest code
              uses: actions/checkout@v4

            - name: Code is run on environment
              run: |
                echo "ACTION_ENVIRONMENT is set, length: ${{ vars.ACTION_ENVIRONMENT }}"

            - name: Deploy to production server
              uses: SamKirkland/FTP-Deploy-Action@v4.3.6
              with:
                  server: ${{ secrets.FTP_HOST }}
                  username: ${{ secrets.FTP_USER }}
                  password: ${{ secrets.FTP_PASSWORD }}
                  security: strict
